{"version":3,"file":"ngx-phone-mask.umd.js","sources":["~/ngx-phone-mask/ngx-phone-mask/src/app/ngx-phone-mask/ngx-phone-mask.module.ts","~/ngx-phone-mask/ngx-phone-mask/src/app/ngx-phone-mask/ngx-phone-mask.directive.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxPhoneMaskDirective } from './ngx-phone-mask.directive';\nexport class NgxPhoneMaskModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  \timports: [\n\t\tCommonModule\n\t],\n\tdeclarations: [NgxPhoneMaskDirective],\n\texports: [NgxPhoneMaskDirective]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction NgxPhoneMaskModule_tsickle_Closure_declarations() {\n/** @type {?} */\nNgxPhoneMaskModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nNgxPhoneMaskModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Component, ViewChild, ElementRef, Input, forwardRef, Directive, HostListener  } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\n\nconst /** @type {?} */ noop = () => { };\n\nconst /** @type {?} */ masks = [\n\t'1',\n\t'1 (1',\n\t'1 (11',\n\t'1 (111',\n\t'1 (111) 1',\n\t'1 (111) 11',\n\t'1 (111) 11-1',\n\t'1 (111) 11-11',\n\t'1 (111) 11-111',\n\t'1 (111) 111-111',\n\t'1 (111) 111-11-11',\n\t'1 (111) 111-111-11'\n];\n\nconst /** @type {?} */ clean = (number) => {\n\treturn number\n\t\t.toString()\n\t\t.replace(/[^\\d\\^]/gm, '');\n}\n\nconst /** @type {?} */ format = (number) => {\n\tlet /** @type {?} */ lastCharIndex = 0;\n\tconst /** @type {?} */ cleanValue = clean(number);\n\tconst /** @type {?} */ charCount = cleanValue.replace(/\\^/gm, '').length;\n\tif (charCount === 0) {\n\t\treturn {\n\t\t\tformatted: '',\n\t\t\tcursorPosition: 0\n\t\t};\n\t}\n\tconst /** @type {?} */ mask = masks[charCount - 1];\n\tif (charCount > 1 && !mask) {\n\t\treturn null;\n\t}\n\tlet /** @type {?} */ cursorPosition;\n\tconst /** @type {?} */ formatted = mask.split('').map((c, i) => {\n\t\tif (c === '1') {\n\t\t\tif (cleanValue[lastCharIndex] == '^') {\n\t\t\t\tcursorPosition = i + 1;\n\t\t\t\tlastCharIndex++;\n\t\t\t}\n\n\t\t\tlastCharIndex++;\n\t\t\treturn cleanValue[lastCharIndex - 1];\n\t\t} else {\n\t\t\treturn c;\n\t\t}\n\t}).join('');\n\n\tif (!cursorPosition) {\n\t\tcursorPosition = formatted.length;\n\t}\n\n\tcursorPosition++; // because of '+'\n\n\treturn {\n\t\tformatted: `+${formatted}`,\n\t\tcursorPosition\n\t}\n}\nexport class NgxPhoneMaskDirective {\nprivate onTouchedCallback: () => void = noop;\nprivate onChangeCallback: (_: any) => void = noop;\npublic valueType: 'clean' | 'full' = 'clean';\npublic showMask: boolean = true;\npublic disabled;\nprivate _value;\nprivate oldValue = '';\n/**\n * @param {?} input\n */\nconstructor(private input: ElementRef) {\n\t}\n/**\n * @return {?}\n */\nupdateInputView() {\n\t\tconst /** @type {?} */ input = this.input.nativeElement;\n\t\tconst /** @type {?} */ cursorPosition = input.selectionStart;\n\t\tconst /** @type {?} */ value = this._value;\n\t\tconst /** @type {?} */ valueWithCursor = value.substring(0, cursorPosition) + '^' + value.substring(cursorPosition);\n\n\t\tconst /** @type {?} */ formatted = format(valueWithCursor);\n\n\n\t\tif (!formatted) {\n\t\t\tinput.value = this.oldValue;\n\t\t\treturn;\n\t\t}\n\n\t\tconst /** @type {?} */ newValue = formatted.formatted;\n\t\tif (newValue != input.value) {\n\t\t\tinput.value = newValue;\n\t\t\tinput.setSelectionRange(formatted.cursorPosition, formatted.cursorPosition);\n\t\t}\n\t\tthis.oldValue = newValue;\n\t\tthis.emitValue(newValue);\n\t}\n/**\n * @param {?} v\n * @return {?}\n */\nemitValue(v) {\n\t\tlet /** @type {?} */ value;\n\t\tswitch(this.valueType) {\n\t\t\tcase 'clean':\n\t\t\t\tvalue = v.replace(/[^\\d\\+]/gm, '');\n\t\t\t\tbreak;\n\t\t\tcase 'full':\n\t\t\t\tvalue = v;\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.onChangeCallback(value);\n\t}\n/**\n * @return {?}\n */\nonInput() {\n\t\tthis._value = this.input.nativeElement.value;\n\t\tthis.updateInputView();\n\t}\n/**\n * @param {?} v\n * @return {?}\n */\nset value(v) {\n\t\tlet /** @type {?} */ value = v ? v : '';\n\t\tthis._value = value;\n\t\tthis.updateInputView();\n\t}\n/**\n * @param {?} value\n * @return {?}\n */\nwriteValue(value: any) {\n\t\tthis.value = value;\n\t}\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnChange(fn: any) {\n\t\tthis.onChangeCallback = fn;\n\t}\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnTouched(fn: any) {\n\t\tthis.onTouchedCallback = fn;\n\t}\n/**\n * @param {?} isDisabled\n * @return {?}\n */\nsetDisabledState(isDisabled) {\n\t\tthis.disabled = isDisabled;\n\t}\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n\tselector: '[ngxPhoneMask]',\n\tproviders: [\n\t\t{\n\t\t\tprovide: NG_VALUE_ACCESSOR,\n\t\t\tuseExisting: forwardRef(() => NgxPhoneMaskDirective),\n\t\t\tmulti: true\n\t\t}\n\t]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'valueType': [{ type: Input },],\n'showMask': [{ type: Input },],\n'onInput': [{ type: HostListener, args: ['input', ] },],\n};\n}\n\nfunction NgxPhoneMaskDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nNgxPhoneMaskDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nNgxPhoneMaskDirective.ctorParameters;\n/** @type {?} */\nNgxPhoneMaskDirective.propDecorators;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype.onTouchedCallback;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype.onChangeCallback;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype.valueType;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype.showMask;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype.disabled;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype._value;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype.oldValue;\n/** @type {?} */\nNgxPhoneMaskDirective.prototype.input;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["CommonModule","NgModule","HostListener","Input","ElementRef","forwardRef","NG_VALUE_ACCESSOR","Directive"],"mappings":"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"}